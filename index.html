<html>
	<head>
		<title>BROWSER OF THE WINDS CANVAS VERSION</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<link href="style.css" rel="stylesheet" type="text/css" />
		<link href="css/overcast/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
		<script type="text/javascript" src="common.js"></script>
		<script type="text/javascript" src="logger.js"></script>
		<script type="text/javascript" src="data_loader.js"></script>
		<script type="text/javascript" src="image_cache.js"></script>
		<script type="text/javascript" src="game.js"></script>
		<script type="text/javascript" src="viewport.js"></script>
		<script type="text/javascript" src="actor.js"></script>
		<script type="text/javascript" src="mouse.js"></script>
		<script type="text/javascript" src="movement.js"></script>
		<script type="text/javascript" src="monsters.js"></script>
		<script type="text/javascript" src="spells.js"></script>
		<script type="text/javascript" src="melee.js"></script>
		<script type="text/javascript" src="debug.js"></script>
		<script type="text/javascript" src="MapGen/mapgen.js"></script>
		<script type="text/javascript" src="inventory.js"></script>
		<script type="text/javascript" src="paperdoll.js"></script>
		<script type="text/javascript" src="level.js"></script>
		<script type="text/javascript" src="verbs.js"></script>
	</head>
	<body style="margin:0px;">
	  Use arrows or num pad to move, OR click and drag the man to move. Click on RAT MANS or bump into them to attack! Select a spell from the menu, click Cast and then click a tile!<br/>
		processing:<input type="text" id="processing" value="0"></input>
		command:<input type="text" id="command" value="0"></input>
		<a href="changelog.txt">Change Log</a> | <a href="MapGen/test.html">Map Generator</a> | <a href="Inventory/test.html">Inventory TPOC</a>
		<br/>
		TEST: <select id="test_menu">
		  <option value="0">TEST FIZZLES</option>
		  <option value="1">TEST SPLAT</option>
		  <option value="2">TEST PROJECTILES</option>
		  <option value="3">TEST AREA EFFECT</option>
		  <option value="6">TEST CONES</option>
		  <option value="7">TEST DIAGONAL CONES</option>
		  <option value="-1">------------------</option>
      <option value="4">KILL ALL RAT MANS</option>
      <option value="5">DO TURN</option>
		  <option value="8">REVEAL MAP</option>
		  <option value="9">GAME OVER MAN</option>
		</select>
		<input type="submit" value="Run Test" onclick="run_test();"></input>
		SPELL: <select id="spell_menu">
      <option value="p1">MAGIC MISSILE</option>
      <option value="p2">LIGHTNING BOLT</option>
      <option value="p3">FIREBOLT</option>
      <option value="a1">FIREBALL</option>
      <option value="p4">BOULDER</option>
      <option value="c1">FIRE BREATH</option>
      <option value="u1">LIGHT</option>
    </select>
		<input type="submit" value="Cast Spell" onclick="cast_spell( $('#spell_menu').val() );"></input>
		<input type="submit" value="Switch to Random Map" onclick="random_map();"></input>
		<input type="submit" value="Inventory" onclick="Inventory.open();"></input>
		VERB: <select id="verb_menu">
      <option value="search">SEARCH</option>
      <option value="open">OPEN</option>
      <option value="close">CLOSE</option>
      <option value="rest">REST UNTIL HEALED</option>
      <option value="sleep">SLEEP UNTIL MANA IS RESTORED</option>
    </select>
    <input type="submit" value="Do Verb" onclick="perform_action( $('#verb_menu').val() );"></input>
		<br/><br/>
		<div id="game_area" style="margin-left:10px;">
      <canvas id="map" width="960" height="480" style="border:1px solid black;" oncontextmenu="return false;">
			  Canvas not supported. You must be using Internet Explorer 9, Firefox 4+, Chrome or Safari.
			</canvas>
			<div id="log" class="Information" style="width:810px;height:150px;"></div>
			<div id="stats" class="Information" style="width:143px;height:144px;border-left-width:0px;padding:3px;">
			  <span style="float:left;">Hit Points</span>
			  <span id="hp" style="float:right;"></span><br/>
			  <span style="float:left;">Mana</span>
			  <span id="mana" style="float:right;color:blue;"></span><br/>
			  <span style="float:left;">Time</span>
        <span id="time" style="float:right;"></span>
        <span style="float:left;">Dungeon Level</span>
        <span id="level" style="float:right;"></span>
			</div>
			<div style="clear:left;">
				<input type="submit" value="Clear Log" onclick="Log.clear();"></input>
				<input type="submit" value="Shortcuts" onclick="$('#shortcuts').dialog('open');"></input>
				<input type="submit" value="Debug Flags" onclick="$('#debug_flags').dialog('open');"></input>
		  </div>
			<div id="shortcuts" title="Keyboard Shortcuts">
        <ul>
          <li>Arrows/Numpad - Move/attack</li>
          <li>ESC - Cancel current action/close dialog</li>
          <li>I - Open Inventory</li>
          <li>T - Take all items at current location</li>
          <li>S - Search</li>
          <li>O - Open</li>
          <li>C - Close</li>
          <li>R - Rest Until Healed</li>
          <li>E - Sleep Until Mana is Restored</li>
        </ul>
      </div>
      <div id="debug_flags" title="Debug Flags">
        <input type="checkbox" id="debugmode" onclick="DEBUGGING = this.checked;"/>
        <label for="debugmode">Debug Mode</label><br/>
        <input type="checkbox" id="freeze" onclick="FREEZE_MONSTERS = this.checked;"/>
        <label for="freeze">Freeze monster movement</label><br/>
        <input type="checkbox" id="mspells" onclick="MONSTER_SPELLS = this.checked;"/>
        <label for="mspells">Monsters can cast spells</label><br/>
        <input type="checkbox" id="detect" onclick="DETECT_MONSTERS = this.checked;"/>
        <label for="detect">Detect monsters</label>
      </div>
			<div id="tooltip">
        <div id="tooltip_header"></div>
        <ul id="tooltip_contents"></ul>
			</div>
			<div id="inventory" title="Inventory" style="overflow:hidden;">
	      <div style="position:relative;">
	        <div style="background:white;width:401px;height:481px;position:relative;">
	          <div class="ItemSlot Row0 Col0"></div>
	          <div id="back" class="ItemSlot ItemContainer Row0 Col1" style="background:url(images/inv_back.png);"></div>
	          <div id="head" class="ItemSlot ItemContainer Row0 Col2" style="background:url(images/inv_head.png);"></div>
	          <div id="neck" class="ItemSlot ItemContainer Row0 Col3" style="background:url(images/inv_neck.png);"></div>
	          <div class="ItemSlot Row0 Col4"></div>
	          <div id="chest" class="ItemSlot ItemContainer Row1 Col0" style="background:url(images/inv_chest.png);"></div>
	          <div class="ItemSlot Row1 Col4"></div>
	          <div id="arms" class="ItemSlot ItemContainer Row2 Col0" style="background:url(images/inv_arms.png);"></div>
	          <div id="hands" class="ItemSlot ItemContainer Row2 Col4" style="background:url(images/inv_hands.png);"></div>
	          <div id="weapon" class="ItemSlot ItemContainer Row3 Col0" style="background:url(images/inv_weapon.png);"></div>
	          <div id="shield" class="ItemSlot ItemContainer Row3 Col4" style="background:url(images/inv_shield.png);"></div>
	          <div id="rightring" class="ItemSlot ItemContainer Row4 Col0" style="background:url(images/inv_rightring.png);"></div>
	          <div id="leftring" class="ItemSlot ItemContainer Row4 Col4" style="background:url(images/inv_leftring.png);"></div>
	          <div id="waist" class="ItemSlot ItemContainer Row5 Col0" style="background:url(images/inv_waist.png);"></div>
	          <div id="feet" class="ItemSlot ItemContainer Row5 Col4" style="background:url(images/inv_feet.png);"></div>
	          <img src="images/paperdoll.png" style="position:absolute;left:81px;top:81px;"/>
	        </div>
	        <div style="padding-left:10px;width:415px;position:absolute;left:405px;top:0px;">
	          Bag:
	          <div id="bag" style="margin-bottom:10px;height:230px;" class="NonEquipped ItemContainer"></div>
	          Floor:
	          <div id="floor" style="height:195px;" class="NonEquipped ItemContainer"></div>
	        </div>
	      </div>
	    </div>
		</div>
		
	  <script type="text/javascript">
		  $(document).ready( function()
		    {
		      $("#shortcuts").dialog({ autoOpen: false,
                               resizable: false,
                               modal: true,
                               close: function(event, ui) {
                                        document.game.draw();
                                      }
                            }); 
		      
		      $("#debug_flags").dialog({ autoOpen: false,
                               resizable: false,
                               modal: true
                            });
		      
		      $("#debugmode").prop( "checked", DEBUGGING );
		      $("#freeze").prop( "checked", FREEZE_MONSTERS );
		      $("#mspells").prop( "checked", MONSTER_SPELLS );
		      $("#detect").prop( "checked", DETECT_MONSTERS );
		    
		      document.game = new Game();
	        document.game.run(1);
	        
	        set_command( NO_COMMAND );
          set_finished();
		    });
	  </script>
	</body>
</html>